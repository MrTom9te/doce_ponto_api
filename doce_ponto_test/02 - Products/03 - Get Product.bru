meta {
  name: 03 - Obter Detalhes do Produto
  type: http
  seq: 3
}

get {
  url: {{baseUrl}}/products/{{productId}}
  auth: bearer
}

auth:bearer {
  token: {{authToken}}
}

tests {
  test("Busca de produto por ID deve ser bem-sucedida", function() {
    const body = res.getBody();

    // 1. Verifica o código de status
    expect(res.status).to.equal(200);

    // 2. Verifica a estrutura da resposta
    expect(body.success).to.be.true;
    expect(body.data).to.not.be.null;

    // 3. Verifica se o produto retornado é o correto
    const product = body.data;
    expect(product.id).to.equal(bru.getVar("productId"));
    expect(product.name).to.equal("Bolo de Teste Automatizado");
    expect(product.price).to.equal(35.50);

    // 4. Verifica os tipos de dados do produto
    expect(product.description).to.be.a('string');
    expect(product.imageUrl).to.be.a('string');
    expect(product.isActive).to.be.a('boolean');
    expect(product.createdAt).to.be.a('string');
    expect(product.updatedAt).to.be.a('string');
  });

  test("Busca de produto com ID inválido/inexistente deve falhar (exemplo)", function() {
    // Para testar isso, você precisaria de uma requisição separada com um ID inválido
    // expect(res.status).to.equal(404);
    // expect(res.getBody().code).to.equal("PRODUCT_NOT_FOUND");
  });
}

docs {
  **Testa o endpoint autenticado para obter os detalhes de um produto específico.**

  Esta requisição utiliza o `authToken` para autenticação e o `productId` (salvo pelo teste `01 - Criar Produto`) como parâmetro na URL para identificar o recurso.

  Os testes validam se a API retorna os dados corretos para o produto solicitado e se a estrutura da resposta está de acordo com a especificação.
}
